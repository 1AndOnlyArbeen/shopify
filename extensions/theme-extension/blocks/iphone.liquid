{% comment %}
iPhone Bundle Block - "Buy iPhone, Get Charger Free"

This block implements automatic cart synchronization logic for a product bundle where:
1. When iPhone is added to cart, charger is automatically added with matching quantity
2. Charger quantity always matches iPhone quantity (updates on iPhone quantity changes)
3. When iPhone is removed, charger is automatically removed
4. When charger is removed while iPhone exists, it's automatically re-added
5. Prevents infinite cart update loops and handles all edge cases

Uses Shopify AJAX Cart API endpoints for real-time cart manipulation.
{% endcomment %}

<div
  id="iphone-bundle"
  data-iphone-variant-id="{{ block.settings.iphone_variant_id }}"
  data-charger-variant-id="{{ block.settings.charger_variant_id }}"
  data-bundle-name="iPhone with Free Charger">
</div>

<script src="{{ 'iphone-bundle.js' | asset_url }}" defer></script>


{% schema %}
{
  "name": "iPhone charger",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "iphone_variant_id",
      "label": "iPhone Variant ID",
      "default": "47535108292828"
    },
    {
      "type": "text",
      "id": "charger_variant_id",
      "label": "Charger Variant ID",
      "default": "47535108948188"
    }
  ]
}
{% endschema %}